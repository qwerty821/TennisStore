version: '3.4'

networks:
    my_network:
        driver: bridge

services:
    onlinestore:
        image: ${DOCKER_REGISTRY-}onlinestore
        build:
            context: .
            dockerfile: OnlineShop/Dockerfile
        networks:   
            - my_network
        ports:
            - "5000:80" 
            - "5001:443"
    
    sqlserver:
        image: mcr.microsoft.com/mssql/server:2022-latest
        container_name: sql_server
        environment:
            MSSQL_SA_PASSWORD: "Asdfg12345"
            ACCEPT_EULA: "Y"
        ports:
            - "1433:1433"
        networks:
            - my_network
        volumes:
            - sqlserverdata:/var/opt/mssql

volumes:
    sqlserverdata:
        driver: local
